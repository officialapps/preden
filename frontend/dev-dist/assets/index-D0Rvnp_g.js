const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/resolveImplementation-PXhC_s3p.js","assets/index-CmFym_Z-.js","assets/index-CZBfBqZB.css","assets/extractIPFS-Bso1lIa2.js","assets/getInstalledModules-CO0hPi_l.js","assets/eth_estimateGas-Dfm5d_sp.js","assets/decimals-CF-4GJLu.js","assets/eth_getTransactionCount-BUG7TsTN.js","assets/send-gasless-transaction-DcIcfb0T.js","assets/signing-BXDMQ_6x.js"])))=>i.map(i=>d[i]);
import{ae as _t,aD as Bn,s as X,ad as On,aE as $n,aF as w,aG as E,aH as N,aI as Lt,aJ as ce,aK as Sn,aL as Fn,aM as Un,aN as Dn,a as I,y as ee,n as D,af as Bt,_ as v,aO as we,u as Ot,g as C,ac as Cn,i as ue,b as L,a3 as ut,a4 as Y,x as Nn,aP as Z,aQ as Rn,aR as ze,aa as zn,aS as Mn,aT as xe,ak as $t,aU as Vn,al as St,ar as G,aV as Me,aW as j,aX as Ve,z as Hn,aY as kn,k as jn,aZ as Ft,a_ as Ut,a$ as Wn,b0 as Kn,b1 as pe,b2 as Zn}from"./index-CmFym_Z-.js";function Yn(e){const t=[],n=e.length;for(let r=0;r<n;r++){const s=e[r],i=_t(s);t.push(i)}return t}const so=/^(.*)\[([0-9]*)\]$/,io=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,ao=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,qn=2n**96n-1n,oo=2n**256n-1n;async function ye(e){return Xn({...e,action:"transaction:sent"})}function Xn(e){return Bn({client:e.client,ecosystem:e.ecosystem,data:{action:e.action,clientId:e.client.clientId,chainId:e.chainId,transactionHash:e.transactionHash,walletAddress:e.walletAddress,walletType:e.walletType,contractAddress:e.contractAddress,functionName:e.functionName,gasPrice:e.gasPrice,errorCode:X(e.error)}})}function Jn(e){const t=e.domain;return(t==null?void 0:t.chainId)!==void 0&&On(t.chainId)&&(e.domain={...e.domain,chainId:$n(e.domain.chainId)}),e}function J(e,{includeName:t=!1}={}){if(e.type!=="function"&&e.type!=="event"&&e.type!=="error")throw new ur(e.type);return`${e.name}(${Ae(e.inputs,{includeName:t})})`}function Ae(e,{includeName:t=!1}={}){return e?e.map(n=>Qn(n,{includeName:t})).join(t?", ":","):""}function Qn(e,{includeName:t}){return e.type.startsWith("tuple")?`(${Ae(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")}class Dt extends w{constructor({data:t,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${Ae(n,{includeName:!0})})`,`Data:   ${t} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t,this.params=n,this.size=r}}class Ct extends w{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class er extends w{constructor({expectedLength:t,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${t}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class tr extends w{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${E(n)}) does not match expected size (bytes${t}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class nr extends w{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class rr extends w{constructor(t,{docsPath:n}){super([`Encoded error signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=t}}class sr extends w{constructor({docsPath:t}){super("Cannot extract event signature from empty topics.",{docsPath:t,name:"AbiEventSignatureEmptyTopicsError"})}}class Nt extends w{constructor(t,{docsPath:n}){super([`Encoded event signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class dt extends w{constructor(t,{docsPath:n}={}){super([`Event ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class ir extends w{constructor(t,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${t.type}\` in \`${J(t.abiItem)}\`, and`,`\`${n.type}\` in \`${J(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class $e extends w{constructor({abiItem:t,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${Ae(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t,this.data=n,this.params=r,this.size=s}}class Rt extends w{constructor({abiItem:t,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${J(t,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t}}class ar extends w{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class or extends w{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class cr extends w{constructor(t){super([`Value "${t}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class ur extends w{constructor(t){super([`"${t}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class dr extends w{constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}class zt extends w{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${t}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}class Mt extends w{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function _(e,{dir:t,size:n=32}={}){return typeof e=="string"?H(e,{dir:t,size:n}):fr(e,{dir:t,size:n})}function H(e,{dir:t,size:n=32}={}){if(n===null)return e;const r=e.replace("0x","");if(r.length>n*2)throw new Mt({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[t==="right"?"padEnd":"padStart"](n*2,"0")}`}function fr(e,{dir:t,size:n=32}={}){if(n===null)return e;if(e.length>n)throw new Mt({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=t==="right";r[i?s:n-s-1]=e[i?s:e.length-s-1]}return r}function He(e,{dir:t="left"}={}){let n=typeof e=="string"?e.replace("0x",""):e,r=0;for(let s=0;s<n.length-1&&n[t==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=t==="left"?n.slice(r):n.slice(0,n.length-r),typeof e=="string"?(n.length===1&&t==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const lr=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function W(e,t={}){return typeof e=="number"||typeof e=="bigint"?T(e,t):typeof e=="string"?Ht(e,t):typeof e=="boolean"?Vt(e,t):S(e,t)}function Vt(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(N(n,{size:t.size}),_(n,{size:t.size})):n}function S(e,t={}){let n="";for(let s=0;s<e.length;s++)n+=lr[e[s]];const r=`0x${n}`;return typeof t.size=="number"?(N(r,{size:t.size}),_(r,{dir:"right",size:t.size})):r}function T(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const a=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<a){const c=typeof e=="bigint"?"n":"";throw new Lt({max:i?`${i}${c}`:void 0,min:`${a}${c}`,signed:n,size:r,value:`${e}${c}`})}const o=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?_(o,{size:r}):o}const pr=new TextEncoder;function Ht(e,t={}){const n=pr.encode(e);return S(n,t)}const yr=new TextEncoder;function k(e,t={}){return typeof e=="number"||typeof e=="bigint"?hr(e,t):typeof e=="boolean"?mr(e,t):ce(e)?de(e,t):kt(e,t)}function mr(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),typeof t.size=="number"?(N(n,{size:t.size}),_(n,{size:t.size})):n}const F={zero:48,nine:57,A:65,F:70,a:97,f:102};function ft(e){if(e>=F.zero&&e<=F.nine)return e-F.zero;if(e>=F.A&&e<=F.F)return e-(F.A-10);if(e>=F.a&&e<=F.f)return e-(F.a-10)}function de(e,t={}){let n=e;t.size&&(N(n,{size:t.size}),n=_(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let a=0,o=0;a<s;a++){const c=ft(r.charCodeAt(o++)),u=ft(r.charCodeAt(o++));if(c===void 0||u===void 0)throw new w(`Invalid byte sequence ("${r[o-2]}${r[o-1]}" in "${r}").`);i[a]=c*16+u}return i}function hr(e,t){const n=T(e,t);return de(n)}function kt(e,t={}){const n=yr.encode(e);return typeof t.size=="number"?(N(n,{size:t.size}),_(n,{dir:"right",size:t.size})):n}function lt(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function gr(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function ke(e,...t){if(!gr(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function me(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function jt(e,t){ke(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const le=BigInt(2**32-1),pt=BigInt(32);function br(e,t=!1){return t?{h:Number(e&le),l:Number(e>>pt&le)}:{h:Number(e>>pt&le)|0,l:Number(e&le)|0}}function wr(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:i,l:a}=br(e[s],t);[n[s],r[s]]=[i,a]}return[n,r]}const xr=(e,t,n)=>e<<n|t>>>32-n,Ar=(e,t,n)=>t<<n|e>>>32-n,Pr=(e,t,n)=>t<<n-32|e>>>64-n,Tr=(e,t,n)=>e<<n-32|t>>>64-n;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function vr(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Ge(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function $(e,t){return e<<32-t|e>>>t}const yt=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Gr(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function mt(e){for(let t=0;t<e.length;t++)e[t]=Gr(e[t])}function Ir(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function je(e){return typeof e=="string"&&(e=Ir(e)),ke(e),e}class Wt{clone(){return this._cloneInto()}}function Kt(e){const t=r=>e().update(je(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}const Zt=[],Yt=[],qt=[],Er=BigInt(0),re=BigInt(1),_r=BigInt(2),Lr=BigInt(7),Br=BigInt(256),Or=BigInt(113);for(let e=0,t=re,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],Zt.push(2*(5*r+n)),Yt.push((e+1)*(e+2)/2%64);let s=Er;for(let i=0;i<7;i++)t=(t<<re^(t>>Lr)*Or)%Br,t&_r&&(s^=re<<(re<<BigInt(i))-re);qt.push(s)}const[$r,Sr]=wr(qt,!0),ht=(e,t,n)=>n>32?Pr(e,t,n):xr(e,t,n),gt=(e,t,n)=>n>32?Tr(e,t,n):Ar(e,t,n);function Fr(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let a=0;a<10;a++)n[a]=e[a]^e[a+10]^e[a+20]^e[a+30]^e[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,c=(a+2)%10,u=n[c],d=n[c+1],f=ht(u,d,1)^n[o],l=gt(u,d,1)^n[o+1];for(let y=0;y<50;y+=10)e[a+y]^=f,e[a+y+1]^=l}let s=e[2],i=e[3];for(let a=0;a<24;a++){const o=Yt[a],c=ht(s,i,o),u=gt(s,i,o),d=Zt[a];s=e[d],i=e[d+1],e[d]=c,e[d+1]=u}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)n[o]=e[a+o];for(let o=0;o<10;o++)e[a+o]^=~n[(o+2)%10]&n[(o+4)%10]}e[0]^=$r[r],e[1]^=Sr[r]}n.fill(0)}class We extends Wt{constructor(t,n,r,s=!1,i=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,lt(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=vr(this.state)}keccak(){yt||mt(this.state32),Fr(this.state32,this.rounds),yt||mt(this.state32),this.posOut=0,this.pos=0}update(t){me(this);const{blockLen:n,state:r}=this;t=je(t);const s=t.length;for(let i=0;i<s;){const a=Math.min(n-this.pos,s-i);for(let o=0;o<a;o++)r[this.pos++]^=t[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:s}=this;t[r]^=n,n&128&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){me(this,!1),ke(t),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=t.length;s<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-s);t.set(n.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return lt(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(jt(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:a}=this;return t||(t=new We(n,r,s,a,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=s,t.enableXOF=a,t.destroyed=this.destroyed,t}}const Ur=(e,t,n)=>Kt(()=>new We(t,e,n)),Dr=Ur(1,136,256/8);function Pe(e,t){const n=t||"hex",r=Dr(ce(e,{strict:!1})?k(e):e);return n==="bytes"?r:W(r)}const Cr=e=>Pe(k(e));function Nr(e){return Cr(e)}function Rr(e){let t=!0,n="",r=0,s="",i=!1;for(let a=0;a<e.length;a++){const o=e[a];if(["(",")",","].includes(o)&&(t=!0),o==="("&&r++,o===")"&&r--,!!t){if(r===0){if(o===" "&&["event","function",""].includes(s))s="";else if(s+=o,o===")"){i=!0;break}continue}if(o===" "){e[a-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}s+=o,n+=o}}if(!i)throw new w("Unable to normalize signature.");return s}const zr=e=>{const t=typeof e=="string"?e:_t(e);return Rr(t)};function Ke(e){return Nr(zr(e))}const Te=Ke;class Se extends w{constructor({address:t}){super(`Address "${t}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class Xt extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const Ie=new Xt(8192);function Jt(e,t){if(Ie.has(`${e}.${t}`))return Ie.get(`${e}.${t}`);const n=e.substring(2).toLowerCase(),r=Pe(kt(n),"bytes"),s=n.split("");for(let a=0;a<40;a+=2)r[a>>1]>>4>=8&&s[a]&&(s[a]=s[a].toUpperCase()),(r[a>>1]&15)>=8&&s[a+1]&&(s[a+1]=s[a+1].toUpperCase());const i=`0x${s.join("")}`;return Ie.set(`${e}.${t}`,i),i}const Mr=/^0x[a-fA-F0-9]{40}$/,Ee=new Xt(8192);function Q(e,t){const{strict:n=!0}=t??{},r=`${e}.${n}`;if(Ee.has(r))return Ee.get(r);const s=Mr.test(e)?e.toLowerCase()===e?!0:n?Jt(e)===e:!0:!1;return Ee.set(r,s),s}function B(e){return typeof e[0]=="string"?Hr(e):Vr(e)}function Vr(e){let t=0;for(const s of e)t+=s.length;const n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function Hr(e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function he(e,t,n,{strict:r}={}){return ce(e,{strict:!1})?kr(e,t,n,{strict:r}):tn(e,t,n,{strict:r})}function Qt(e,t){if(typeof t=="number"&&t>0&&t>E(e)-1)throw new zt({offset:t,position:"start",size:E(e)})}function en(e,t,n){if(typeof t=="number"&&typeof n=="number"&&E(e)!==n-t)throw new zt({offset:n,position:"end",size:E(e)})}function tn(e,t,n,{strict:r}={}){Qt(e,t);const s=e.slice(t,n);return r&&en(s,t,n),s}function kr(e,t,n,{strict:r}={}){Qt(e,t);const s=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return r&&en(s,t,n),s}const jr=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Wr(e,t){if(e.length!==t.length)throw new nr({expectedLength:e.length,givenLength:t.length});const n=Kr({params:e,values:t}),r=Ye(n);return r.length===0?"0x":r}function Kr({params:e,values:t}){const n=[];for(let r=0;r<e.length;r++)n.push(Ze({param:e[r],value:t[r]}));return n}function Ze({param:e,value:t}){const n=qe(e.type);if(n){const[r,s]=n;return Yr(t,{length:r,param:{...e,type:s}})}if(e.type==="tuple")return es(t,{param:e});if(e.type==="address")return Zr(t);if(e.type==="bool")return Xr(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const r=e.type.startsWith("int"),[,,s="256"]=jr.exec(e.type)??[];return Jr(t,{signed:r,size:Number(s)})}if(e.type.startsWith("bytes"))return qr(t,{param:e});if(e.type==="string")return Qr(t);throw new ar(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function Ye(e){let t=0;for(let i=0;i<e.length;i++){const{dynamic:a,encoded:o}=e[i];a?t+=32:t+=E(o)}const n=[],r=[];let s=0;for(let i=0;i<e.length;i++){const{dynamic:a,encoded:o}=e[i];a?(n.push(T(t+s,{size:32})),r.push(o),s+=E(o)):n.push(o)}return B([...n,...r])}function Zr(e){if(!Q(e))throw new Se({address:e});return{dynamic:!1,encoded:H(e.toLowerCase())}}function Yr(e,{length:t,param:n}){const r=t===null;if(!Array.isArray(e))throw new cr(e);if(!r&&e.length!==t)throw new er({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let s=!1;const i=[];for(let a=0;a<e.length;a++){const o=Ze({param:n,value:e[a]});o.dynamic&&(s=!0),i.push(o)}if(r||s){const a=Ye(i);if(r){const o=T(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?B([o,a]):o}}if(s)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:B(i.map(({encoded:a})=>a))}}function qr(e,{param:t}){const[,n]=t.type.split("bytes"),r=E(e);if(!n){let s=e;return r%32!==0&&(s=H(s,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:B([H(T(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new tr({expectedSize:Number.parseInt(n),value:e});return{dynamic:!1,encoded:H(e,{dir:"right"})}}function Xr(e){if(typeof e!="boolean")throw new w(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:H(Vt(e))}}function Jr(e,{signed:t,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(t?1n:0n))-1n,s=t?-r-1n:0n;if(e>r||e<s)throw new Lt({max:r.toString(),min:s.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:T(e,{size:32,signed:t})}}function Qr(e){const t=Ht(e),n=Math.ceil(E(t)/32),r=[];for(let s=0;s<n;s++)r.push(H(he(t,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:B([H(T(E(t),{size:32})),...r])}}function es(e,{param:t}){let n=!1;const r=[];for(let s=0;s<t.components.length;s++){const i=t.components[s],a=Array.isArray(e)?s:i.name,o=Ze({param:i,value:e[a]});r.push(o),o.dynamic&&(n=!0)}return{dynamic:n,encoded:n?Ye(r):B(r.map(({encoded:s})=>s))}}function qe(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const Xe=e=>he(Ke(e),0,4);function ts(e){const{abi:t,args:n=[],name:r}=e,s=ce(r,{strict:!1}),i=t.filter(o=>s?o.type==="function"?Xe(o)===r:o.type==="event"?Te(o)===r:!1:"name"in o&&o.name===r);if(i.length===0)return;if(i.length===1)return i[0];let a;for(const o of i){if(!("inputs"in o))continue;if(!n||n.length===0){if(!o.inputs||o.inputs.length===0)return o;continue}if(!o.inputs||o.inputs.length===0||o.inputs.length!==n.length)continue;if(n.every((u,d)=>{const f="inputs"in o&&o.inputs[d];return f?Fe(u,f):!1})){if(a&&"inputs"in a&&a.inputs){const u=nn(o.inputs,a.inputs,n);if(u)throw new ir({abiItem:o,type:u[0]},{abiItem:a,type:u[1]})}a=o}}return a||i[0]}function Fe(e,t){const n=typeof e,r=t.type;switch(r){case"address":return Q(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((s,i)=>Fe(Object.values(e)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(s=>Fe(s,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function nn(e,t,n){for(const r in e){const s=e[r],i=t[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return nn(s.components,i.components,n[r]);const a=[s.type,i.type];if(a.includes("address")&&a.includes("bytes20")?!0:a.includes("address")&&a.includes("string")?Q(n[r],{strict:!1}):a.includes("address")&&a.includes("bytes")?Q(n[r],{strict:!1}):!1)return a}}const bt="/docs/contract/encodeEventTopics";function ns(e){var c;const{abi:t,eventName:n,args:r}=e;let s=t[0];if(n){const u=ts({abi:t,name:n});if(!u)throw new dt(n,{docsPath:bt});s=u}if(s.type!=="event")throw new dt(void 0,{docsPath:bt});const i=J(s),a=Te(i);let o=[];if(r&&"inputs"in s){const u=(c=s.inputs)==null?void 0:c.filter(f=>"indexed"in f&&f.indexed),d=Array.isArray(r)?r:Object.values(r).length>0?(u==null?void 0:u.map(f=>r[f.name]))??[]:[];d.length>0&&(o=(u==null?void 0:u.map((f,l)=>Array.isArray(d[l])?d[l].map((y,h)=>wt({param:f,value:d[l][h]})):typeof d[l]<"u"&&d[l]!==null?wt({param:f,value:d[l]}):null))??[])}return[a,...o]}function wt({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return Pe(k(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new dr(e.type);return Wr([e],[t])}const rs={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},ss={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class xt extends w{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class rn extends w{constructor({length:t,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${t}\`).`,{name:"PositionOutOfBoundsError"})}}class is extends w{constructor({count:t,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${t}\`).`,{name:"RecursiveReadLimitExceededError"})}}const as={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new is({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new rn({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new xt({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new xt({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function sn(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(as);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}function os(e,t={}){typeof t.size<"u"&&N(e,{size:t.size});const n=S(e,t);return Un(n,t)}function cs(e,t={}){let n=e;if(typeof t.size<"u"&&(N(n,{size:t.size}),n=He(n)),n.length>1||n[0]>1)throw new Fn(n);return!!n[0]}function U(e,t={}){typeof t.size<"u"&&N(e,{size:t.size});const n=S(e,t);return Sn(n,t)}function us(e,t={}){let n=e;return typeof t.size<"u"&&(N(n,{size:t.size}),n=He(n,{dir:"right"})),new TextDecoder().decode(n)}function ve(e,t){const n=typeof t=="string"?de(t):t,r=sn(n);if(E(n)===0&&e.length>0)throw new Ct;if(E(t)&&E(t)<32)throw new Dt({data:typeof t=="string"?t:S(t),params:e,size:E(t)});let s=0;const i=[];for(let a=0;a<e.length;++a){const o=e[a];r.setPosition(s);const[c,u]=q(r,o,{staticPosition:0});s+=u,i.push(c)}return i}function q(e,t,{staticPosition:n}){const r=qe(t.type);if(r){const[s,i]=r;return fs(e,{...t,type:i},{length:s,staticPosition:n})}if(t.type==="tuple")return ms(e,t,{staticPosition:n});if(t.type==="address")return ds(e);if(t.type==="bool")return ls(e);if(t.type.startsWith("bytes"))return ps(e,t,{staticPosition:n});if(t.type.startsWith("uint")||t.type.startsWith("int"))return ys(e,t);if(t.type==="string")return hs(e,{staticPosition:n});throw new or(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const At=32,Ue=32;function ds(e){const t=e.readBytes(32);return[Jt(S(tn(t,-20))),32]}function fs(e,t,{length:n,staticPosition:r}){if(!n){const a=U(e.readBytes(Ue)),o=r+a,c=o+At;e.setPosition(o);const u=U(e.readBytes(At)),d=ae(t);let f=0;const l=[];for(let y=0;y<u;++y){e.setPosition(c+(d?y*32:f));const[h,m]=q(e,t,{staticPosition:c});f+=m,l.push(h)}return e.setPosition(r+32),[l,32]}if(ae(t)){const a=U(e.readBytes(Ue)),o=r+a,c=[];for(let u=0;u<n;++u){e.setPosition(o+u*32);const[d]=q(e,t,{staticPosition:o});c.push(d)}return e.setPosition(r+32),[c,32]}let s=0;const i=[];for(let a=0;a<n;++a){const[o,c]=q(e,t,{staticPosition:r+s});s+=c,i.push(o)}return[i,s]}function ls(e){return[cs(e.readBytes(32),{size:32}),32]}function ps(e,t,{staticPosition:n}){const[r,s]=t.type.split("bytes");if(!s){const a=U(e.readBytes(32));e.setPosition(n+a);const o=U(e.readBytes(32));if(o===0)return e.setPosition(n+32),["0x",32];const c=e.readBytes(o);return e.setPosition(n+32),[S(c),32]}return[S(e.readBytes(Number.parseInt(s),32)),32]}function ys(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256"),s=e.readBytes(32);return[r>48?os(s,{signed:n}):U(s,{signed:n}),32]}function ms(e,t,{staticPosition:n}){const r=t.components.length===0||t.components.some(({name:a})=>!a),s=r?[]:{};let i=0;if(ae(t)){const a=U(e.readBytes(Ue)),o=n+a;for(let c=0;c<t.components.length;++c){const u=t.components[c];e.setPosition(o+i);const[d,f]=q(e,u,{staticPosition:o});i+=f,s[r?c:u==null?void 0:u.name]=d}return e.setPosition(n+32),[s,32]}for(let a=0;a<t.components.length;++a){const o=t.components[a],[c,u]=q(e,o,{staticPosition:n});s[r?a:o==null?void 0:o.name]=c,i+=u}return[s,i]}function hs(e,{staticPosition:t}){const n=U(e.readBytes(32)),r=t+n;e.setPosition(r);const s=U(e.readBytes(32));if(s===0)return e.setPosition(t+32),["",32];const i=e.readBytes(s,32),a=us(He(i));return e.setPosition(t+32),[a,32]}function ae(e){var r;const{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return(r=e.components)==null?void 0:r.some(ae);const n=qe(e.type);return!!(n&&ae({...e,type:n[1]}))}function an(e){const{abi:t,data:n}=e,r=he(n,0,4);if(r==="0x")throw new Ct;const i=[...t||[],rs,ss].find(a=>a.type==="error"&&r===Xe(J(a)));if(!i)throw new rr(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?ve(i.inputs,he(n,4)):void 0,errorName:i.name}}const gs=(e,t,n)=>JSON.stringify(e,(r,s)=>typeof s=="bigint"?s.toString():s,n);function bs(e,t="hex"){const n=on(e),r=sn(new Uint8Array(n.length));return n.encode(r),t==="hex"?S(r.bytes):r.bytes}function on(e){return Array.isArray(e)?ws(e.map(t=>on(t))):xs(e)}function ws(e){const t=e.reduce((s,i)=>s+i.length,0),n=cn(t);return{length:t<=55?1+t:1+n+t,encode(s){t<=55?s.pushByte(192+t):(s.pushByte(247+n),n===1?s.pushUint8(t):n===2?s.pushUint16(t):n===3?s.pushUint24(t):s.pushUint32(t));for(const{encode:i}of e)i(s)}}}function xs(e){const t=typeof e=="string"?de(e):e,n=cn(t.length);return{length:t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length,encode(s){t.length===1&&t[0]<128?s.pushBytes(t):t.length<=55?(s.pushByte(128+t.length),s.pushBytes(t)):(s.pushByte(183+n),n===1?s.pushUint8(t.length):n===2?s.pushUint16(t.length):n===3?s.pushUint24(t.length):s.pushUint32(t.length),s.pushBytes(t))}}}function cn(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new w("Length is too large.")}const As={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Ps(e){const t={};return typeof e.authorizationList<"u"&&(t.authorizationList=Ts(e.authorizationList)),typeof e.accessList<"u"&&(t.accessList=e.accessList),typeof e.blobVersionedHashes<"u"&&(t.blobVersionedHashes=e.blobVersionedHashes),typeof e.blobs<"u"&&(typeof e.blobs[0]!="string"?t.blobs=e.blobs.map(n=>S(n)):t.blobs=e.blobs),typeof e.data<"u"&&(t.data=e.data),typeof e.from<"u"&&(t.from=e.from),typeof e.gas<"u"&&(t.gas=T(e.gas)),typeof e.gasPrice<"u"&&(t.gasPrice=T(e.gasPrice)),typeof e.maxFeePerBlobGas<"u"&&(t.maxFeePerBlobGas=T(e.maxFeePerBlobGas)),typeof e.maxFeePerGas<"u"&&(t.maxFeePerGas=T(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=T(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(t.nonce=T(e.nonce)),typeof e.to<"u"&&(t.to=e.to),typeof e.type<"u"&&(t.type=As[e.type]),typeof e.value<"u"&&(t.value=T(e.value)),t}function Ts(e){return e.map(t=>({address:t.address,r:t.r?T(BigInt(t.r)):t.r,s:t.s?T(BigInt(t.s)):t.s,chainId:T(t.chainId),nonce:T(t.nonce),...typeof t.yParity<"u"?{yParity:T(t.yParity)}:{},...typeof t.v<"u"&&typeof t.yParity>"u"?{v:T(t.v)}:{}}))}const vs=2n**16n-1n;function Gs(e){const t=(e.transactions??[]).map(n=>typeof n=="string"?n:Dn(n));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}function Is(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+u,o,r)}function Es(e,t,n){return e&t^~e&n}function _s(e,t,n){return e&t^e&n^t&n}class Ls extends Wt{constructor(t,n,r,s){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Ge(this.buffer)}update(t){me(this);const{view:n,buffer:r,blockLen:s}=this;t=je(t);const i=t.length;for(let a=0;a<i;){const o=Math.min(s-this.pos,i-a);if(o===s){const c=Ge(t);for(;s<=i-a;a+=s)this.process(c,a);continue}r.set(t.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){me(this),jt(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:a}=this;n[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(r,0),a=0);for(let f=a;f<s;f++)n[f]=0;Is(r,s-8,BigInt(this.length*8),i),this.process(r,0);const o=Ge(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)o.setUint32(4*f,d[f],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:a,pos:o}=this;return t.length=s,t.pos=o,t.finished=i,t.destroyed=a,s%n&&t.buffer.set(r),t}}const Bs=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),z=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),M=new Uint32Array(64);class Os extends Ls{constructor(){super(64,32,8,!1),this.A=z[0]|0,this.B=z[1]|0,this.C=z[2]|0,this.D=z[3]|0,this.E=z[4]|0,this.F=z[5]|0,this.G=z[6]|0,this.H=z[7]|0}get(){const{A:t,B:n,C:r,D:s,E:i,F:a,G:o,H:c}=this;return[t,n,r,s,i,a,o,c]}set(t,n,r,s,i,a,o,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=o|0,this.H=c|0}process(t,n){for(let f=0;f<16;f++,n+=4)M[f]=t.getUint32(n,!1);for(let f=16;f<64;f++){const l=M[f-15],y=M[f-2],h=$(l,7)^$(l,18)^l>>>3,m=$(y,17)^$(y,19)^y>>>10;M[f]=m+M[f-7]+h+M[f-16]|0}let{A:r,B:s,C:i,D:a,E:o,F:c,G:u,H:d}=this;for(let f=0;f<64;f++){const l=$(o,6)^$(o,11)^$(o,25),y=d+l+Es(o,c,u)+Bs[f]+M[f]|0,m=($(r,2)^$(r,13)^$(r,22))+_s(r,s,i)|0;d=u,u=c,c=o,o=a+y|0,a=i,i=s,s=r,r=y+m|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,c=c+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(r,s,i,a,o,c,u,d)}roundClean(){M.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const $s=Kt(()=>new Os);function Ss(e,t){const n=$s(ce(e,{strict:!1})?k(e):e);return W(n)}function Fs(e,t){if(!Q(e,{strict:!1}))throw new Se({address:e});if(!Q(t,{strict:!1}))throw new Se({address:t});return e.toLowerCase()===t.toLowerCase()}const Pt="/docs/contract/decodeEventLog";function Us(e){const{abi:t,data:n,strict:r,topics:s}=e,i=r??!0,[a,...o]=s;if(!a)throw new sr({docsPath:Pt});const c=t.length===1?t[0]:t.find(m=>m.type==="event"&&a===Te(J(m)));if(!(c&&"name"in c)||c.type!=="event")throw new Nt(a,{docsPath:Pt});const{name:u,inputs:d}=c,f=d==null?void 0:d.some(m=>!("name"in m&&m.name));let l=f?[]:{};const y=d.filter(m=>"indexed"in m&&m.indexed);for(let m=0;m<y.length;m++){const x=y[m],b=o[m];if(!b)throw new Rt({abiItem:c,param:x});l[f?m:x.name||m]=Ds({param:x,value:b})}const h=d.filter(m=>!("indexed"in m&&m.indexed));if(h.length>0){if(n&&n!=="0x")try{const m=ve(h,n);if(m)if(f)l=[...l,...m];else for(let x=0;x<h.length;x++)l[h[x].name]=m[x]}catch(m){if(i)throw m instanceof Dt||m instanceof rn?new $e({abiItem:c,data:n,params:h,size:E(n)}):m}else if(i)throw new $e({abiItem:c,data:"0x",params:h,size:0})}return{eventName:u,args:Object.values(l).length>0?l:void 0}}function Ds({param:e,value:t}){return e.type==="string"||e.type==="bytes"||e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/)?t:(ve([e],t)||[])[0]}function Cs(e){const{abi:t,args:n,logs:r,strict:s=!0}=e,i=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return r.map(a=>{var o;try{const c=t.find(d=>d.type==="event"&&a.topics[0]===Te(d));if(!c)return null;const u=Us({...a,abi:[c],strict:s});return i&&!i.includes(u.eventName)||!Ns({args:u.args,inputs:c.inputs,matchArgs:n})?null:{...u,...a}}catch(c){let u,d;if(c instanceof Nt)return null;if(c instanceof $e||c instanceof Rt){if(s)return null;u=c.abiItem.name,d=(o=c.abiItem.inputs)==null?void 0:o.some(f=>!("name"in f&&f.name))}return{...a,args:d?[]:{},eventName:u}}}).filter(Boolean)}function Ns(e){const{args:t,inputs:n,matchArgs:r}=e;if(!r)return!0;if(!t)return!1;function s(i,a,o){try{return i.type==="address"?Fs(a,o):i.type==="string"||i.type==="bytes"?Pe(k(a))===o:a===o}catch{return!1}}return Array.isArray(t)&&Array.isArray(r)?r.every((i,a)=>{if(i==null)return!0;const o=n[a];return o?(Array.isArray(i)?i:[i]).some(u=>s(o,u,t[a])):!1}):typeof t=="object"&&!Array.isArray(t)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,a])=>{if(a==null)return!0;const o=n.find(u=>u.name===i);return o?(Array.isArray(a)?a:[a]).some(u=>s(o,u,t[i])):!1}):!1}async function Rs(e){const t=await e({method:"eth_gasPrice"});return I(t)}async function Tt(e){const{client:t,chain:n,percentMultiplier:r}=e,s=ee({client:t,chain:n}),i=await Rs(s),a=r?i/BigInt(100)*BigInt(r):0n;return i+a}async function zs(e,t){const n=t.blockTag??"latest",r=t.includeTransactions??!1,s=t.blockNumber!==void 0?D(t.blockNumber):void 0,i=await e({method:"eth_getBlockByNumber",params:[s||n,r]});if(!i)throw new Error("Block not found");return Gs(i)}async function Ms(e){const t=await e({method:"eth_maxPriorityFeePerGas"});return I(t)}async function A(e){return typeof e=="function"?await e():e}function Je(e,t){let[n,r=""]=e.split(".");const s=n.startsWith("-")?"-":"";if(s&&(n=n.slice(1)),r=r.padEnd(t,"0"),t===0)r[0]&&Number.parseInt(r[0])>=5&&(n=(BigInt(n)+1n).toString()),r="";else if(r.length>t){const i=r[t];i&&Number.parseInt(i,10)>=5?(r=(BigInt(r.substring(0,t))+1n).toString().padStart(t,"0"),r.length>t&&(n=(BigInt(n)+1n).toString(),r=r.substring(r.length-t))):r=r.substring(0,t)}return BigInt(`${s}${n}${r}`)}function un(e){return Je(e,18)}function ie(e){if(e===0n||(e&e-1n)===0n)return e;let t=1n;for(;e>0n;)e>>=1n,t<<=1n;return t}const Vs=[78600,2040,248,9372,841,842,2016,9768,2442,1942999413,1952959480,994873017,19011,40875,1511670449,5464];async function Hs(e){var a;const[t,n,r,s]=await Promise.all([A(e.maxFeePerGas),A(e.maxPriorityFeePerGas),A(e.gasPrice),A(e.type)]);if(t!==void 0&&n!==void 0)return{maxFeePerGas:t,maxPriorityFeePerGas:n};if(typeof r=="bigint")return{gasPrice:r};const i=await dn(e.client,e.chain,s==="legacy"?"legacy":"eip1559");return(a=e.chain.experimental)!=null&&a.increaseZeroByteCount?i.gasPrice?{gasPrice:ie(i.gasPrice)}:{maxFeePerGas:t??ie(i.maxFeePerGas??0n),maxPriorityFeePerGas:n??ie(i.maxPriorityFeePerGas??0n)}:i.gasPrice!==void 0?i:{maxFeePerGas:t??i.maxFeePerGas,maxPriorityFeePerGas:n??i.maxPriorityFeePerGas}}async function dn(e,t,n){if((n??t.feeType)==="legacy"||Vs.includes(t.id))return{gasPrice:await Tt({client:e,chain:t,percentMultiplier:10})};const s=await ks(e,t);return s.maxFeePerGas!==null&&s.maxPriorityFeePerGas!==null?{maxFeePerGas:s.maxFeePerGas,maxPriorityFeePerGas:s.maxPriorityFeePerGas}:{gasPrice:await Tt({client:e,chain:t,percentMultiplier:10})}}async function ks(e,t,n=10){let r=null,s=null;const i=ee({client:e,chain:t}),[a,o]=await Promise.all([zs(i,{blockTag:"latest"}),Ms(i).catch(()=>null)]),c=a==null?void 0:a.baseFeePerGas,u=t.id;return u===220||u===1220?{maxFeePerGas:null,maxPriorityFeePerGas:null}:(u===80002||u===137?s=await Zs(u):o!==null&&(s=o),s==null||c==null?{maxFeePerGas:null,maxPriorityFeePerGas:null}:(s=js(s,n),r=c*2n+s,(u===42220||u===44787||u===62320)&&(s=r),{maxFeePerGas:r,maxPriorityFeePerGas:s}))}function js(e,t=10){const n=e/BigInt(100)*BigInt(t);return e+n}function Ws(e){switch(e){case 137:return"https://gasstation.polygon.technology/v2";case 80002:return"https://gasstation-testnet.polygon.technology/v2"}}const Ks=31n;async function Zs(e){const t=Ws(e);try{const r=(await(await fetch(t)).json()).fast.maxPriorityFee;if(r>0){const s=Number.parseFloat(r).toFixed(9);return Je(s,9)}}catch(n){console.error("failed to fetch gas",n)}return Ks}const Ys="https://{clientId}.ipfscdn.io/ipfs/{cid}";function qs(e){var t,n;if(e.uri.startsWith("ipfs://")){const r=((n=(t=e.client.config)==null?void 0:t.storage)==null?void 0:n.gatewayUrl)??Ys,s=e.client.clientId,i=Xs(e.uri);let a;return typeof globalThis<"u"&&"Application"in globalThis&&(a=globalThis.Application.applicationId),`${r.replace("{clientId}",s).split("/ipfs")[0]}/ipfs/${i}${a?`?bundleId=${a}`:""}`}if(e.uri.startsWith("http"))return e.uri;throw new Error('Invalid URI scheme, expected "ipfs://" or "http(s)://"')}function Xs(e){if(!e.startsWith("ipfs://"))return e;const t=e.search(/\/(Qm|baf)/i);return e.slice(t+1)}function Js(e=32){return Bt(Qs(e))}function Qs(e=32){return globalThis.crypto.getRandomValues(new Uint8Array(e))}async function ei(e){var r,s,i,a,o,c,u,d,f;let t;if(e.uri.startsWith("ar://")){const{resolveArweaveScheme:l}=await v(async()=>{const{resolveArweaveScheme:y}=await import("./arweave-CAGvOb64.js");return{resolveArweaveScheme:y}},[]);t=l(e)}else t=qs(e);const n=await we(e.client)(t,{keepalive:(i=(s=(r=e.client.config)==null?void 0:r.storage)==null?void 0:s.fetch)==null?void 0:i.keepalive,headers:(c=(o=(a=e.client.config)==null?void 0:a.storage)==null?void 0:o.fetch)==null?void 0:c.headers,requestTimeoutMs:e.requestTimeoutMs??((f=(d=(u=e.client.config)==null?void 0:u.storage)==null?void 0:d.fetch)==null?void 0:f.requestTimeoutMs)??6e4});if(!n.ok){const l=await n.text();throw new Error(`Failed to download file: ${n.status} ${n.statusText} ${l||""}`)}return n}function ti(e,t="https://contract.thirdweb.com/abi"){return Ot(async()=>{if(e.abi)return e.abi;if(e.chain.id===31337||e.chain.id===1337)return await vt(e);try{return await ni(e,t)}catch{return await vt(e)}},{cacheKey:`${e.chain.id}-${e.address}`,cacheTime:1e3*60*60*1})}async function ni(e,t="https://contract.thirdweb.com/abi"){const r=await(await we(e.client)(`${t}/${e.chain.id}/${e.address}`)).json();if(!r||r.error)throw new Error(`Failed to resolve ABI from contract API. ${r.error||""}`);return r}async function fn(e){const[{resolveImplementation:t},{extractIPFSUri:n}]=await Promise.all([v(()=>import("./resolveImplementation-PXhC_s3p.js"),__vite__mapDeps([0,1,2])),v(()=>import("./extractIPFS-Bso1lIa2.js"),__vite__mapDeps([3,1,2]))]),{bytecode:r}=await t(e);if(r==="0x"){const{id:i,name:a}=e.chain;throw new Error(`Failed to load contract bytecode. Make sure the contract [${e.address}] exists on the chain [${a||"Unknown Chain"} (chain id: ${i})]`)}const s=n(r);if(!s)return[];try{return(await(await ei({uri:s,client:e.client})).json()).output.abi}catch{return[]}}const ri={inputs:[],name:"getAllPlugins",outputs:[{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"},{internalType:"address",name:"pluginAddress",type:"address"}],internalType:"struct IPluginMap.Plugin[]",name:"registered",type:"tuple[]"}],stateMutability:"view",type:"function"},si={inputs:[],name:"getAllExtensions",outputs:[{components:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"metadataURI",type:"string"},{internalType:"address",name:"implementation",type:"address"}],internalType:"struct IExtension.ExtensionMetadata",name:"metadata",type:"tuple"},{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"}],internalType:"struct IExtension.ExtensionFunction[]",name:"functions",type:"tuple[]"}],internalType:"struct IExtension.Extension[]",name:"allExtensions",type:"tuple[]"}],stateMutability:"view",type:"function"},ii={inputs:[],name:"facets",outputs:[{components:[{internalType:"address",name:"facetAddress",type:"address"},{internalType:"bytes4[]",name:"functionSelectors",type:"bytes4[]"}],type:"tuple[]"}],stateMutability:"view",type:"function"};async function vt(e,t,n){const[r,s,i,a,o]=await Promise.all([fn(e),ai(e),oi(e),ci(e),ui(e)]),c=[...new Set([...s,...i,...a,...o])];if(!c.length)return r;const u=await di({contract:e,plugins:c,resolveSubAbi:n});return fi({rootAbi:r,pluginAbis:u})}async function ai(e){try{const{readContract:t}=await v(async()=>{const{readContract:r}=await Promise.resolve().then(()=>nt);return{readContract:r}},void 0),n=await t({contract:e,method:ri});return n.length?[...new Set(n.map(r=>r.pluginAddress))]:[]}catch{}return[]}async function oi(e){try{const{readContract:t}=await v(async()=>{const{readContract:r}=await Promise.resolve().then(()=>nt);return{readContract:r}},void 0),n=await t({contract:e,method:si});return n.length?[...new Set(n.map(r=>r.metadata.implementation))]:[]}catch{}return[]}async function ci(e){try{const{getInstalledModules:t}=await v(async()=>{const{getInstalledModules:r}=await import("./getInstalledModules-CO0hPi_l.js");return{getInstalledModules:r}},__vite__mapDeps([4,1,2])),n=await t({contract:e});return n.length?[...new Set(n.map(r=>r.implementation))]:[]}catch{}return[]}async function ui(e){try{const{readContract:t}=await v(async()=>{const{readContract:r}=await Promise.resolve().then(()=>nt);return{readContract:r}},void 0),n=await t({contract:e,method:ii});return n.length?n.map(r=>r.facetAddress):[]}catch{}return[]}async function di(e){return Promise.all(e.plugins.map(t=>{const n=C({...e.contract,address:t});return e.resolveSubAbi?e.resolveSubAbi(n):fn(n)}))}function fi(e){let t=e.pluginAbis.flat().filter(r=>r.type!=="constructor");e.rootAbi&&(t=[...e.rootAbi,...t].filter(r=>r.type!=="fallback"&&r.type!=="receive").filter(Boolean));const n=[...new Set(Yn(t))];return Cn(n)}async function Gt(e){const{error:t,contract:n}=e,r=await li({error:t,contract:n});return r?new pi(r,n):t}async function li(e){const{error:t,contract:n}=e;if(typeof t=="object"){const r=t;if(r.data&&r.data!=="0x"&&ue(r.data)){let s=n==null?void 0:n.abi;n&&!s&&(s=await ti(n).catch(()=>{}));const i=an({data:r.data,abi:s});return`${i.errorName}${i.args?` - ${i.args}`:""}`}}return`Execution Reverted: ${gs(t)}`}class pi extends Error{constructor(t,n){var s;let r=t;super(r),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"chainId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TransactionError",this.contractAddress=n==null?void 0:n.address,this.chainId=(s=n==null?void 0:n.chain)==null?void 0:s.id,this.message=r}}const _e=new WeakMap;async function yi(e){var i,a;const t=typeof e.from=="string"?e.from??void 0:((i=e.from)==null?void 0:i.address)??((a=e.account)==null?void 0:a.address),n={...e.transaction,from:t};if(_e.has(n))return _e.get(n);const{account:r}=e,s=(async()=>{var x,b;const o=await A(e.transaction.gas);if(o!==void 0)return o;if(r!=null&&r.estimateGas)try{let p=await r.estimateGas(e.transaction);return(x=e.transaction.chain.experimental)!=null&&x.increaseZeroByteCount&&(p=ie(p)),p}catch(p){throw await Gt({error:p,contract:e.transaction.__contract})}const{encode:c}=await v(async()=>{const{encode:p}=await Promise.resolve().then(()=>Ji);return{encode:p}},void 0),[u,d,f,l]=await Promise.all([c(e.transaction),A(e.transaction.to),A(e.transaction.value),A(e.transaction.authorizationList)]),[{getRpcClient:y},{eth_estimateGas:h}]=await Promise.all([v(()=>import("./index-CmFym_Z-.js").then(p=>p.b4),__vite__mapDeps([1,2])),v(()=>import("./eth_estimateGas-Dfm5d_sp.js"),__vite__mapDeps([5,1,2]))]),m=y(e.transaction);try{let p=await h(m,Ps({to:d?L(d):void 0,data:u,from:t?L(t):void 0,value:f,authorizationList:l==null?void 0:l.map(g=>({...g,r:ut(g.r),s:ut(g.s),nonce:Number(g.nonce),contractAddress:L(g.address)}))}));return(b=e.transaction.chain.experimental)!=null&&b.increaseZeroByteCount&&(p=ie(p)),p}catch(p){throw await Gt({error:p,contract:e.transaction.__contract})}})();return _e.set(n,s),s}function ln(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="function")}function mi(e){return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{balance:n.balance?D(n.balance):void 0,nonce:n.nonce?D(n.nonce):void 0,code:n.code,state:n.state,stateDiff:n.stateDiff}]))}async function hi(e,t){const{blockNumber:n,blockTag:r,...s}=t,a=(n?D(n):void 0)||r||"latest";return await e({method:"eth_call",params:t.stateOverrides?[s,a,mi(t.stateOverrides)]:[s,a]})}function oe(e){return ue(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}function Qe(e,t){if(e.length!==t.length)throw new Error("The number of parameters and values must match.");const n=gi({params:e,values:t}),r=tt(n);return r.length===0?"0x":r}function gi({params:e,values:t}){const n=[];for(let r=0;r<e.length;r++)n.push(et({param:e[r],value:t[r]}));return n}function et({param:e,value:t}){const n=Gi(e.type);if(n){const[r,s]=n;return wi(t,{length:r,param:{...e,type:s}})}if(e.type==="tuple")return vi(t,{param:e});if(e.type==="address")return bi(t);if(e.type==="bool")return Ai(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const r=e.type.startsWith("int");return Pi(t,{signed:r})}if(e.type.startsWith("bytes"))return xi(t,{param:e});if(e.type==="string")return Ti(t);throw new Error(`Unsupported parameter type: ${e.type}`)}function tt(e){let t=0;for(let i=0;i<e.length;i++){const{dynamic:a,encoded:o}=e[i];a?t+=32:t+=oe(o)}const n=[],r=[];let s=0;for(let i=0;i<e.length;i++){const{dynamic:a,encoded:o}=e[i];a?(n.push(D(t+s,{size:32})),r.push(o),s+=oe(o)):n.push(o)}return Y(...n,...r)}function bi(e){if(e!==""&&e!==void 0&&!Nn(e))throw new Error(`Invalid address: ${e}`);return{dynamic:!1,encoded:Z(e.toLowerCase())}}function wi(e,{length:t,param:n}){const r=t===null;if(!Array.isArray(e))throw new Error("Invalid array value.");if(!r&&e.length!==t)throw new Error("Invalid array length.");let s=!1;const i=[];for(let a=0;a<e.length;a++){const o=et({param:n,value:e[a]});o.dynamic&&(s=!0),i.push(o)}if(r||s){const a=tt(i);if(r){const o=D(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?Y(o,a):o}}if(s)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:Y(...i.map(({encoded:a})=>a))}}function xi(e,{param:t}){const[,n]=t.type.split("bytes"),r=oe(e);if(!n){let s=e;return r%32!==0&&(s=Z(s,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:Y(Z(D(r,{size:32})),s)}}if(r!==Number.parseInt(n))throw new Error(`Invalid bytes${n} size: ${r}`);return{dynamic:!1,encoded:Z(e,{dir:"right"})}}function Ai(e){return{dynamic:!1,encoded:Z(Rn(e))}}function Pi(e,{signed:t}){return{dynamic:!1,encoded:D(e,{size:32,signed:t})}}function Ti(e){const t=ze(e),n=Math.ceil(oe(t)/32),r=[];for(let s=0;s<n;s++)r.push(Z(zn(t,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Y(Z(D(oe(t),{size:32})),...r)}}function vi(e,{param:t}){let n=!1;const r=[];for(let s=0;s<t.components.length;s++){const i=t.components[s],a=Array.isArray(e)?s:i.name,o=et({param:i,value:e[a]});r.push(o),o.dynamic&&(n=!0)}return{dynamic:n,encoded:n?tt(r):Y(...r.map(({encoded:s})=>s))}}function Gi(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const Le=new Mn(4096);function V(e){const t=typeof e=="string"?e:X(e);if(Le.has(t))return Le.get(t);const n=typeof e=="string"?xe(e):e,s=[Xe(n),n.inputs,n.outputs];return Le.set(t,s),s}async function K(e){const{contract:t,method:n,params:r}=e,s=async()=>{var f,l;if(Array.isArray(n))return n;if(ln(n))return V(n);if(typeof n=="function")return V(await n(t));if(typeof n=="string"&&n.startsWith("function ")){const y=xe(n);if(y.type==="function")return V(y);throw new Error('"method" passed is not of type "function"')}if(t.abi&&((f=t.abi)==null?void 0:f.length)>0){const y=(l=t.abi)==null?void 0:l.find(h=>h.type==="function"&&h.name===n);if(y)return V(y)}throw new Error(`Could not resolve method "${n}".`)},[i,a]=await Promise.all([s(),typeof r=="function"?r():r]);let o;i[1].length===0?o=i[0]:o=i[0]+Qe(i[1],a).slice(2);const c=ee({chain:t.chain,client:t.client}),u=await hi(c,{data:o,to:t.address,from:e.from?L(e.from):void 0}),d=ve(i[2],u);return Array.isArray(d)&&d.length===1?d[0]:d}const nt=Object.freeze(Object.defineProperty({__proto__:null,readContract:K},Symbol.toStringTag,{value:"Module"})),Ii="0xdd62ed3e",Ei=[{type:"address",name:"owner"},{type:"address",name:"spender"}],_i=[{type:"uint256"}];async function Li(e){return K({contract:e.contract,method:[Ii,Ei,_i],params:[e.owner,e.spender]})}function Bi(e,t){return t&&(e.__preparedMethod=t.preparedMethod,e.__contract=t.contract),e}function fe(e){const{contract:t,method:n,params:r,...s}=e,i=()=>(async()=>{var a,o;if(Array.isArray(n))return n;if(ln(n))return V(n);if(typeof n=="function")return V(await n(t));if(typeof n=="string"&&n.startsWith("function ")){const c=xe(n);if(c.type==="function")return V(c);throw new Error('"method" passed is not of type "function"')}if(t.abi&&((a=t.abi)==null?void 0:a.length)>0){const c=(o=t.abi)==null?void 0:o.find(u=>u.type==="function"&&u.name===n);if(c)return V(c)}throw new Error(`Could not resolve method "${n}".`)})();return Bi({...s,to:t.address,chain:t.chain,client:t.client,data:async()=>{let a;return Array.isArray(n)?a=n:a=await i(),a[1].length===0?a[0]:a[0]+Qe(a[1],await A(r??[])).slice(2)}},{preparedMethod:i,contract:t})}function pn(e){let t;return()=>(t||(t=e()),t)}const Oi="0x095ea7b3",$i=[{type:"address",name:"spender"},{type:"uint256",name:"value"}],Si=[{type:"bool"}];function Fi(e){const t=pn(async()=>"asyncParams"in e?await e.asyncParams():e);return fe({contract:e.contract,method:[Oi,$i,Si],params:async()=>{const n=await t();return[n.spender,n.value]},value:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.value},accessList:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.accessList},gas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.gas},gasPrice:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.gasPrice},maxFeePerGas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.maxFeePerGas},maxPriorityFeePerGas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.maxPriorityFeePerGas},nonce:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.nonce},extraGas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.extraGas},erc20Value:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.erc20Value}})}function Ui(e){return Fi({contract:e.contract,asyncParams:async()=>{let t;if("amount"in e){const{decimals:n}=await v(async()=>{const{decimals:s}=await import("./decimals-CF-4GJLu.js");return{decimals:s}},__vite__mapDeps([6,1,2])),r=await n(e).catch(()=>18);t=Je(e.amount.toString(),r)}else t=e.amountWei;return{spender:e.spender,value:t,overrides:{erc20Value:{amountWei:t,tokenAddress:e.contract.address}}}}})}const yn="0x0000000000000000000000000000000000000000",Di="0xf15d424e",Ci=[{type:"address",name:"signer"}],Ni=[{type:"tuple",name:"permissions",components:[{type:"address",name:"signer"},{type:"address[]",name:"approvedTargets"},{type:"uint256",name:"nativeTokenLimitPerTransaction"},{type:"uint128",name:"startTimestamp"},{type:"uint128",name:"endTimestamp"}]}];async function Ri(e){return K({contract:e.contract,method:[Di,Ci,Ni],params:[e.signer]})}const zi="0x5892e236",Mi=[{type:"tuple",name:"req",components:[{type:"address",name:"signer"},{type:"uint8",name:"isAdmin"},{type:"address[]",name:"approvedTargets"},{type:"uint256",name:"nativeTokenLimitPerTransaction"},{type:"uint128",name:"permissionStartTimestamp"},{type:"uint128",name:"permissionEndTimestamp"},{type:"uint128",name:"reqValidityStartTimestamp"},{type:"uint128",name:"reqValidityEndTimestamp"},{type:"bytes32",name:"uid"}]},{type:"bytes",name:"signature"}],Vi=[];function Hi(e){const t=pn(async()=>"asyncParams"in e?await e.asyncParams():e);return fe({contract:e.contract,method:[zi,Mi,Vi],params:async()=>{const n=await t();return[n.req,n.signature]},value:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.value},accessList:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.accessList},gas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.gas},gasPrice:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.gasPrice},maxFeePerGas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.maxFeePerGas},maxPriorityFeePerGas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.maxPriorityFeePerGas},nonce:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.nonce},extraGas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.extraGas},erc20Value:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.erc20Value}})}function se(e){if(["string","number"].includes(typeof e)&&!Number.isInteger(Number(e)))throw new Error(`Expected value to be an integer to convert to a bigint, got ${e} of type ${typeof e}`);return e instanceof Uint8Array?BigInt(Bt(e)):BigInt(e)}const De=(e,t)=>typeof e=="bigint"?t(e):Array.isArray(e)?e.map(n=>De(n,t)):e&&typeof e=="object"?Object.fromEntries(Object.entries(e).map(([n,r])=>[n,De(r,t)])):e;function It(){return new Date(Date.now()+1e3*60*60*24*365*10)}function Be(e){return se(Math.floor(e.getTime()/1e3))}const ki=[{name:"signer",type:"address"},{name:"isAdmin",type:"uint8"},{name:"approvedTargets",type:"address[]"},{name:"nativeTokenLimitPerTransaction",type:"uint256"},{name:"permissionStartTimestamp",type:"uint128"},{name:"permissionEndTimestamp",type:"uint128"},{name:"reqValidityStartTimestamp",type:"uint128"},{name:"reqValidityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"}];async function ji(e){const{account:t,contract:n,req:r}=e,s=await t.signTypedData({domain:{name:"Account",version:"1",verifyingContract:n.address,chainId:n.chain.id},primaryType:"SignerPermissionRequest",types:{SignerPermissionRequest:ki},message:r});return{req:r,signature:s}}async function Wi(e){var r;const{target:t,permissions:n}=e;return{approvedTargets:n.approvedTargets==="*"?[yn]:n.approvedTargets,nativeTokenLimitPerTransaction:un(((r=n.nativeTokenLimitPerTransaction)==null?void 0:r.toString())||"0"),permissionStartTimestamp:Be(n.permissionStartTimestamp||new Date(0)),permissionEndTimestamp:Be(n.permissionEndTimestamp||It()),reqValidityStartTimestamp:0n,reqValidityEndTimestamp:Be(It()),uid:await Js(),isAdmin:0,signer:t}}function Ki(e){const{contract:t,sessionKeyAddress:n,account:r,permissions:s}=e;return Hi({contract:t,async asyncParams(){const{req:i,signature:a}=await ji({account:r,contract:t,req:await Wi({target:n,permissions:s})});return{signature:a,req:i}}})}async function Zi(e){var a;const{accountContract:t,sessionKeyAddress:n,newPermissions:r}=e;if(!await $t(t))return!0;const i=await Ri({contract:t,signer:n});return!!(i.endTimestamp&&i.endTimestamp<Math.floor(new Date().getTime()/1e3)||!Yi(i.approvedTargets,r.approvedTargets)||un(((a=r.nativeTokenLimitPerTransaction)==null?void 0:a.toString())??"0")>i.nativeTokenLimitPerTransaction)}function Yi(e,t){return t==="*"&&e.length===1&&e[0]===yn?!0:t!=="*"?t.map(n=>n.toLowerCase()).every(n=>e.map(r=>r.toLowerCase()).includes(n)):!1}const Ce=new Map;function qi(e){const t=Ce.get(e);if(t)return t;const n=Vn([]);return Ce.set(e,n),n}function Xi(e){const{address:t,transactionHash:n,chainId:r}=e,s=qi(t);s.setValue([...s.getValue(),{transactionHash:n,chainId:r}]),Ce.set(t,s)}const Oe=new WeakMap;async function te(e){if(Oe.has(e))return Oe.get(e);const t=(async()=>{const[n,r,{concatHex:s}]=await Promise.all([mn(e),hn(e),v(()=>Promise.resolve().then(()=>ta),void 0)]);return r?s([n,r]):n})();return Oe.set(e,t),t}async function mn(e){if(e.data===void 0)return"0x";if(typeof e.data=="function"){const t=await e.data();return t||"0x"}return e.data}async function hn(e){if(e.extraCallData){if(typeof e.extraCallData=="function"){const t=await e.extraCallData();if(!t)return;if(!t.startsWith("0x"))throw Error("Invalid extra calldata - must be a hex string");return t==="0x"?void 0:t}if(!e.extraCallData.startsWith("0x"))throw Error("Invalid extra calldata - must be a hex string");return e.extraCallData}}const Ji=Object.freeze(Object.defineProperty({__proto__:null,encode:te,getDataFromTx:mn,getExtraCallDataFromTx:hn},Symbol.toStringTag,{value:"Module"}));async function rt(e){if(await St(e.transaction.chain)){const{getZkGasFees:m}=await v(async()=>{const{getZkGasFees:g}=await Promise.resolve().then(()=>xn);return{getZkGasFees:g}},void 0),{gas:x,maxFeePerGas:b,maxPriorityFeePerGas:p}=await m({transaction:e.transaction,from:typeof e.from=="string"?L(e.from):e.from!==void 0?L(e.from.address):void 0});e.transaction={...e.transaction,gas:x,maxFeePerGas:b,maxPriorityFeePerGas:p}}const n=ee(e.transaction),r=e.transaction.chain.id,s=e.from;let[i,a,o,c,u,d,f,l,y]=await Promise.all([te(e.transaction),(async()=>{const m=await A(e.transaction.nonce);return m!==void 0?m:s?await v(async()=>{const{eth_getTransactionCount:x}=await import("./eth_getTransactionCount-BUG7TsTN.js");return{eth_getTransactionCount:x}},__vite__mapDeps([7,1,2])).then(({eth_getTransactionCount:x})=>x(n,{address:typeof s=="string"?L(s):L(s.address),blockTag:"pending"})):void 0})(),yi({...e,from:e.from}),Hs(e.transaction),A(e.transaction.to),A(e.transaction.accessList),A(e.transaction.value),A(e.transaction.authorizationList),A(e.transaction.type)]);const h=await A(e.transaction.extraGas);return h&&(o+=h),{to:u,chainId:r,data:i,gas:o,nonce:a,accessList:d,value:f,authorizationList:l,type:y,...c}}async function Qi(e){let{account:t,transaction:n,gasless:r}=e;if(t.onTransactionRequested&&await t.onTransactionRequested(n),n.eip712){const{sendEip712Transaction:a}=await v(async()=>{const{sendEip712Transaction:o}=await Promise.resolve().then(()=>xn);return{sendEip712Transaction:o}},void 0);return a({account:t,transaction:n})}const s=await rt({transaction:n,from:t});if(r){const{sendGaslessTransaction:a}=await v(async()=>{const{sendGaslessTransaction:o}=await import("./send-gasless-transaction-DcIcfb0T.js");return{sendGaslessTransaction:o}},__vite__mapDeps([8,1,2]));return a({account:t,transaction:n,serializableTransaction:s,gasless:r})}const i=await t.sendTransaction(s);return Xi({address:t.address,transactionHash:i.transactionHash,chainId:n.chain.id}),{...i,chain:n.chain,client:n.client}}async function ea(e,t){return await e({method:"eth_sendRawTransaction",params:[t]})}function gn(e){return Y(...e)}const ta=Object.freeze(Object.defineProperty({__proto__:null,concatHex:gn},Symbol.toStringTag,{value:"Module"})),Et=vs*32n;class na extends w{constructor({givenLength:t,maxBytecodeSize:n}){super(`Bytecode cannot be longer than ${n} bytes. Given length: ${t}`,{name:"BytecodeLengthExceedsMaxSizeError"})}}class ra extends w{constructor({givenLengthInWords:t}){super(`Bytecode length in 32-byte words must be odd. Given length in words: ${t}`,{name:"BytecodeLengthInWordsMustBeOddError"})}}class sa extends w{constructor({givenLength:t}){super(`The bytecode length in bytes must be divisible by 32. Given length: ${t}`,{name:"BytecodeLengthMustBeDivisibleBy32Error"})}}function ia(e){const t=k(e);if(t.length%32!==0)throw new sa({givenLength:t.length});if(t.length>Et)throw new na({givenLength:t.length,maxBytecodeSize:Et});const n=Ss(t),r=k(n),s=t.length/32;if(s%2===0)throw new ra({givenLengthInWords:s});const i=k(s),a=_(i,{size:2}),o=new Uint8Array([1,0]);return r.set(o,0),r.set(a,2),r}const bn=50000n,aa=e=>{const t=oa(e);return{domain:{name:"zkSync",version:"2",chainId:e.chainId},types:{Transaction:[{name:"txType",type:"uint256"},{name:"from",type:"uint256"},{name:"to",type:"uint256"},{name:"gasLimit",type:"uint256"},{name:"gasPerPubdataByteLimit",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymaster",type:"uint256"},{name:"nonce",type:"uint256"},{name:"value",type:"uint256"},{name:"data",type:"bytes"},{name:"factoryDeps",type:"bytes32[]"},{name:"paymasterInput",type:"bytes"}]},primaryType:"Transaction",message:t}};function oa(e){const{gas:t,nonce:n,to:r,from:s,value:i,maxFeePerGas:a,maxPriorityFeePerGas:o,paymaster:c,paymasterInput:u,gasPerPubdata:d,data:f,factoryDeps:l}=e;return{txType:113n,from:BigInt(s),to:r?BigInt(r):0n,gasLimit:t??0n,gasPerPubdataByteLimit:d??bn,maxFeePerGas:a??0n,maxPriorityFeePerGas:o??0n,paymaster:c?BigInt(c):0n,nonce:n?BigInt(n):0n,value:i??0n,data:f||"0x0",factoryDeps:(l==null?void 0:l.map(y=>G(ia(y))))??[],paymasterInput:u||"0x"}}async function ca(e){const{account:t,transaction:n}=e,r=await it(e),s=await st({account:t,eip712Transaction:r,chainId:n.chain.id}),i=ee(n);return{transactionHash:await ea(i,s),chain:n.chain,client:n.client}}async function st(e){const{account:t,eip712Transaction:n,chainId:r}=e,s=aa(n),i=await t.signTypedData({...s});return ua({...n,chainId:r,customSignature:i})}async function it(e){const{account:t,transaction:n}=e,{gas:r,maxFeePerGas:s,maxPriorityFeePerGas:i,gasPerPubdata:a}=await wn({transaction:n,from:L(t.address)});return{...await rt({transaction:{...n,gas:r,maxFeePerGas:s,maxPriorityFeePerGas:i},from:t.address}),...n.eip712,gasPerPubdata:a,from:t.address}}function ua(e){const{chainId:t,gas:n,nonce:r,to:s,from:i,value:a,maxFeePerGas:o,maxPriorityFeePerGas:c,customSignature:u,factoryDeps:d,paymaster:f,paymasterInput:l,gasPerPubdata:y,data:h}=e,m=[r?G(r):"0x",c?G(c):"0x",o?G(o):"0x",n?G(n):"0x",s??"0x",a?G(a):"0x",h??"0x0",G(t),G(""),G(""),G(t),i??"0x",y?G(y):G(bn),d??[],u??"0x",f&&l?[f,l]:[]];return gn(["0x71",bs(m)])}async function wn(e){const{transaction:t,from:n}=e;let[r,s,i,a]=await Promise.all([A(t.gas),A(t.maxFeePerGas),A(t.maxPriorityFeePerGas),A(t.eip712)]),o=a==null?void 0:a.gasPerPubdata;if(r===void 0||s===void 0||i===void 0){const c=ee(t),u=await da({transaction:t,from:n}),d=await c({method:"zks_estimateFee",params:[De(u,G)]});r=se(d.gas_limit)*2n,s=se(d.max_fee_per_gas)*2n,i=se(d.max_priority_fee_per_gas)||1n,o=se(d.gas_per_pubdata_limit)*2n,o<50000n&&(o=50000n)}return{gas:r,maxFeePerGas:s,maxPriorityFeePerGas:i,gasPerPubdata:o}}async function da(e){var c;const{transaction:t,from:n}=e,[r,s,i,a]=await Promise.all([te(t),A(t.to),A(t.value),A(t.eip712)]),o=a==null?void 0:a.gasPerPubdata;return{from:n,to:s,data:r,value:i,gasPerPubdata:o,eip712Meta:{...a,gasPerPubdata:o||50000n,factoryDeps:(c=a==null?void 0:a.factoryDeps)==null?void 0:c.map(u=>Array.from(de(u)))},type:"0x71"}}const xn=Object.freeze(Object.defineProperty({__proto__:null,getZkGasFees:wn,populateEip712Transaction:it,sendEip712Transaction:ca,signEip712Transaction:st},Symbol.toStringTag,{value:"Module"})),fa=2n**96n-1n;function la(e){const{logs:t,events:n,strict:r}=e;return Cs({logs:t,abi:n.map(s=>s.abiEvent),strict:r})}function pa(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="event")}function An(e){const{signature:t}=e;let n;return pa(t)?n=t:n=xe(t),{abiEvent:n,hash:Ke(n),topics:ns({abi:[n],args:e.filters})}}function ya(e={}){return An({signature:"event UserOperationRevertReason(bytes32 indexed userOpHash, address indexed sender, uint256 nonce, bytes revertReason)",filters:e})}function ma(e={}){return An({signature:"event PostOpRevertReason(bytes32 indexed userOpHash, address indexed sender, uint256 nonce, bytes revertReason)",filters:e})}function ha(e){const{receipt:t}=e,n={...t,transactionHash:t.transactionHash,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs,to:t.to?t.to:null,transactionIndex:t.transactionIndex,status:t.status,type:t.type};return t.blobGasPrice&&(n.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(n.blobGasUsed=BigInt(t.blobGasUsed)),{...e,receipt:n,userOpHash:e.userOpHash,actualGasCost:BigInt(e.actualGasCost),actualGasUsed:BigInt(e.actualGasUsed),nonce:BigInt(e.nonce)}}async function ga(e){const{factoryContract:t,predictAddressOverride:n,adminAddress:r,accountSalt:s,accountAddress:i}=e;if(n)return n(t,r);if(i)return i;if(!r)throw new Error("Account address is required to predict the smart wallet address.");return Ot(async()=>{const a=s&&ue(s)?s:ze(s??"");let o,c=0;const u=3;for(;c<=u;)try{o=await K({contract:t,method:"function getAddress(address, bytes) returns (address)",params:[r,a]});break}catch(d){if(c===u)throw d;const f=2**(c+1)*200;await new Promise(l=>setTimeout(l,f)),c++}if(!o)throw new Error(`No smart account address found for admin address ${r} and salt ${s}`);return o},{cacheKey:`${e.factoryContract.chain.id}-${e.factoryContract.address}-${e.adminAddress}-${e.accountSalt}`,cacheTime:1e3*60*60*24})}function Pn(e){const{adminAddress:t,factoryContract:n,createAccountOverride:r,accountSalt:s}=e;if(r)return r(n,t);const i=s&&ue(s)?s:ze(s??"");return fe({contract:n,method:"function createAccount(address, bytes) returns (address)",params:[t,i]})}function Tn(e){const{accountContract:t,transaction:n,executeOverride:r}=e;return r?r(t,n):fe({contract:t,method:"function execute(address, uint256, bytes)",params:[n.to||"",n.value||0n,n.data||"0x"],gas:n.gas?n.gas+21000n:void 0})}function ba(e){const{accountContract:t,transactions:n,executeBatchOverride:r}=e;return r?r(t,n):fe({contract:t,method:"function executeBatch(address[], uint256[], bytes[])",params:[n.map(s=>s.to||""),n.map(s=>s.value||0n),n.map(s=>s.data||"0x")]})}const wa="0x35567e1a",xa=[{type:"address",name:"sender"},{type:"uint192",name:"key"}],Aa=[{type:"uint256",name:"nonce"}];async function Pa(e){return K({contract:e.contract,method:[wa,xa,Aa],params:[e.sender,e.key]})}const Ta="0xa6193531",va=[{type:"tuple",name:"userOp",components:[{type:"address",name:"sender"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"uint256",name:"callGasLimit"},{type:"uint256",name:"verificationGasLimit"},{type:"uint256",name:"preVerificationGas"},{type:"uint256",name:"maxFeePerGas"},{type:"uint256",name:"maxPriorityFeePerGas"},{type:"bytes",name:"paymasterAndData"},{type:"bytes",name:"signature"}]}],Ga=[{type:"bytes32"}];async function Ia(e){return K({contract:e.contract,method:[Ta,va,Ga],params:[e.userOp]})}const Ea="0x22cdde4c",_a=[{type:"tuple",name:"userOp",components:[{type:"address",name:"sender"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"bytes32",name:"accountGasLimits"},{type:"uint256",name:"preVerificationGas"},{type:"bytes32",name:"gasFees"},{type:"bytes",name:"paymasterAndData"},{type:"bytes",name:"signature"}]}],La=[{type:"bytes32"}];async function Ba(e){return K({contract:e.contract,method:[Ea,_a,La],params:[e.userOp]})}function Oa(e){return e.factory?B([e.factory,e.factoryData||"0x"]):"0x"}function $a(e){return B([_(W(BigInt(e.verificationGasLimit)),{size:16}),_(W(BigInt(e.callGasLimit)),{size:16})])}function Sa(e){return B([_(W(BigInt(e.maxPriorityFeePerGas)),{size:16}),_(W(BigInt(e.maxFeePerGas)),{size:16})])}function Fa(e){return e.paymaster?B([e.paymaster,_(W(BigInt(e.paymasterVerificationGasLimit||0)),{size:16}),_(W(BigInt(e.paymasterPostOpGasLimit||0)),{size:16}),e.paymasterData||"0x"]):"0x"}const Ua=e=>({sender:e.sender,nonce:BigInt(e.nonce),initCode:Oa(e),callData:e.callData,accountGasLimits:$a(e),preVerificationGas:BigInt(e.preVerificationGas),gasFees:Sa(e),paymasterAndData:Fa(e),signature:e.signature}),Da=()=>{const e=BigInt(Math.floor(Math.random()*4294967296)),t=BigInt(Math.floor(Math.random()*4294967296)),n=BigInt(Math.floor(Math.random()*4294967296)),r=BigInt(Math.floor(Math.random()*4294967296)),s=BigInt(Math.floor(Math.random()*4294967296)),i=BigInt(Math.floor(Math.random()*4294967296));return e<<BigInt(160)|t<<BigInt(128)|n<<BigInt(96)|r<<BigInt(64)|s<<BigInt(32)|i};function at(e){return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,n==null||ue(n)?n:G(n)]))}async function ge(e){var h;const{userOp:t,paymasterOverride:n,client:r,chain:s,entrypointAddress:i}=e;if(n)return n(t);const a={"Content-Type":"application/json"},o=i??j,c=Me(s),u={jsonrpc:"2.0",id:1,method:"pm_sponsorUserOperation",params:[at(t),o]},f=await we(r)(c,{method:"POST",headers:a,body:X(u)});if(!f.ok){const m=await f.text()||f.statusText;throw new Error(`Paymaster error: ${f.status} - ${m}`)}const l=await f.json();if(l.result)return typeof l.result=="string"?{paymasterAndData:l.result}:(l.result.policyId&&l.result.reason&&console.warn(`Paymaster policy rejected this transaction with reason: ${l.result.reason} (policyId: ${l.result.policyId})`),{paymasterAndData:l.result.paymasterAndData,verificationGasLimit:l.result.verificationGasLimit?I(l.result.verificationGasLimit):void 0,preVerificationGas:l.result.preVerificationGas?I(l.result.preVerificationGas):void 0,callGasLimit:l.result.callGasLimit?I(l.result.callGasLimit):void 0,paymaster:l.result.paymaster,paymasterData:l.result.paymasterData,paymasterVerificationGasLimit:l.result.paymasterVerificationGasLimit?I(l.result.paymasterVerificationGasLimit):void 0,paymasterPostOpGasLimit:l.result.paymasterPostOpGasLimit?I(l.result.paymasterPostOpGasLimit):void 0});const y=((h=l.error)==null?void 0:h.message)||l.error||f.statusText||"unknown error";throw new Error(`Paymaster error from ${c}: ${y}`)}const ot=new Set,ct=e=>`${e.chain.id}:${e.address}`,vn=e=>{ot.add(ct(e))},Gn=e=>{ot.delete(ct(e))},In=e=>ot.has(ct(e));async function Ca(e){const t=e.timeoutMs||12e4,n=e.intervalMs||1e3,r=Date.now()+t;for(;Date.now()<r;){const s=await Za(e);if(s)return s;await new Promise(i=>setTimeout(i,n))}throw new Error(`Timeout waiting for userOp to be mined on chain ${e.chain.id} with UserOp hash: ${e.userOpHash}`)}async function Na(e){var P;const{transaction:t,accountContract:n,factoryContract:r,adminAddress:s,overrides:i,sponsorGas:a,waitForDeployment:o=!0,isDeployedOverride:c}=e,u=t.chain,d=t.client,f={client:d,chain:u,bundlerUrl:i==null?void 0:i.bundlerUrl,entrypointAddress:i==null?void 0:i.entrypointAddress},l=Ve(((P=e.overrides)==null?void 0:P.entrypointAddress)||j),[y,h,m,x,b]=await Promise.all([typeof c=="boolean"?c:$t(n).then(O=>O||In(n)),te(t),A(t.gas),Ra({executeTx:t,bundlerOptions:f,chain:u,client:d}),ja({accountContract:n,chain:u,client:d,entrypointAddress:i==null?void 0:i.entrypointAddress,getNonceOverride:i==null?void 0:i.getAccountNonce})]),{maxFeePerGas:p,maxPriorityFeePerGas:g}=x;return l==="v0.7"?za({bundlerOptions:f,factoryContract:r,accountContract:n,adminAddress:s,sponsorGas:a,overrides:i,isDeployed:y,nonce:b,callData:h,callGasLimit:m,maxFeePerGas:p,maxPriorityFeePerGas:g,waitForDeployment:o}):Ma({bundlerOptions:f,factoryContract:r,accountContract:n,adminAddress:s,sponsorGas:a,overrides:i,isDeployed:y,nonce:b,callData:h,callGasLimit:m,maxFeePerGas:p,maxPriorityFeePerGas:g,waitForDeployment:o})}async function Ra(e){const{executeTx:t,bundlerOptions:n,chain:r,client:s}=e;let{maxFeePerGas:i,maxPriorityFeePerGas:a}=t;const o=(n==null?void 0:n.bundlerUrl)??Me(r);if(kn(o)){const c=await Ka({options:n});i=c.maxFeePerGas,a=c.maxPriorityFeePerGas}else{const[c,u]=await Promise.all([A(i),A(a)]);if(c&&u)i=c,a=u;else{const d=await dn(s,r);a=u??d.maxPriorityFeePerGas??0n,i=c??d.maxFeePerGas??0n}}return{maxFeePerGas:i,maxPriorityFeePerGas:a}}async function za(e){const{bundlerOptions:t,isDeployed:n,factoryContract:r,accountContract:s,adminAddress:i,sponsorGas:a,overrides:o,nonce:c,callData:u,callGasLimit:d,maxFeePerGas:f,maxPriorityFeePerGas:l,waitForDeployment:y}=e,{chain:h,client:m}=t;let x,b;n?(b="0x",y&&await En(s)):(x=r.address,b=await te(Pn({factoryContract:r,adminAddress:i,accountSalt:o==null?void 0:o.accountSalt,createAccountOverride:o==null?void 0:o.createAccount})),y&&vn(s));const p={sender:s.address,nonce:c,callData:u,maxFeePerGas:f,maxPriorityFeePerGas:l,callGasLimit:d??0n,verificationGasLimit:0n,preVerificationGas:0n,factory:x,factoryData:b,paymaster:void 0,paymasterData:"0x",paymasterVerificationGasLimit:0n,paymasterPostOpGasLimit:0n,signature:Ft};if(a){const g=await ge({userOp:p,chain:h,client:m,entrypointAddress:o==null?void 0:o.entrypointAddress,paymasterOverride:o==null?void 0:o.paymaster});if(g.paymaster&&g.paymasterData&&(p.paymaster=g.paymaster,p.paymasterData=g.paymasterData),g.callGasLimit&&g.verificationGasLimit&&g.preVerificationGas&&g.paymasterPostOpGasLimit&&g.paymasterVerificationGasLimit)p.callGasLimit=g.callGasLimit,p.verificationGasLimit=g.verificationGasLimit,p.preVerificationGas=g.preVerificationGas,p.paymasterPostOpGasLimit=g.paymasterPostOpGasLimit,p.paymasterVerificationGasLimit=g.paymasterVerificationGasLimit;else{const P=o!=null&&o.tokenPaymaster?{[o.tokenPaymaster.tokenAddress]:{stateDiff:{[jn(Qe([{type:"address"},{type:"uint256"}],[s.address,o.tokenPaymaster.balanceStorageSlot]))]:G(qn,{size:32})}}}:void 0,O=await be({userOp:p,options:t},P);p.callGasLimit=O.callGasLimit,p.verificationGasLimit=O.verificationGasLimit,p.preVerificationGas=O.preVerificationGas,p.paymasterPostOpGasLimit=o!=null&&o.tokenPaymaster?500000n:O.paymasterPostOpGasLimit||0n,p.paymasterVerificationGasLimit=O.paymasterVerificationGasLimit||0n;const R=await ge({userOp:p,chain:h,client:m,entrypointAddress:o==null?void 0:o.entrypointAddress,paymasterOverride:o==null?void 0:o.paymaster});R.paymaster&&R.paymasterData&&(p.paymaster=R.paymaster,p.paymasterData=R.paymasterData)}}else{const g=await be({userOp:p,options:t});p.callGasLimit=g.callGasLimit,p.verificationGasLimit=g.verificationGasLimit,p.preVerificationGas=g.preVerificationGas,p.paymasterPostOpGasLimit=g.paymasterPostOpGasLimit||0n,p.paymasterVerificationGasLimit=g.paymasterVerificationGasLimit||0n}return{...p,signature:"0x"}}async function Ma(e){const{bundlerOptions:t,isDeployed:n,factoryContract:r,accountContract:s,adminAddress:i,sponsorGas:a,overrides:o,nonce:c,callData:u,callGasLimit:d,maxFeePerGas:f,maxPriorityFeePerGas:l,waitForDeployment:y}=e,{chain:h,client:m}=t;let x;n?(x="0x",y&&await En(s)):(x=await ka({factoryContract:r,adminAddress:i,accountSalt:o==null?void 0:o.accountSalt,createAccountOverride:o==null?void 0:o.createAccount}),y&&vn(s));const b={sender:s.address,nonce:c,initCode:x,callData:u,maxFeePerGas:f,maxPriorityFeePerGas:l,callGasLimit:d??0n,verificationGasLimit:0n,preVerificationGas:0n,paymasterAndData:"0x",signature:Ft};if(a){const p=await ge({userOp:b,chain:h,client:m,entrypointAddress:o==null?void 0:o.entrypointAddress,paymasterOverride:o==null?void 0:o.paymaster}),g="paymasterAndData"in p?p.paymasterAndData:"0x";if(g&&g!=="0x"&&(b.paymasterAndData=g),p.callGasLimit&&p.verificationGasLimit&&p.preVerificationGas)b.callGasLimit=p.callGasLimit,b.verificationGasLimit=p.verificationGasLimit,b.preVerificationGas=p.preVerificationGas;else{const P=await be({userOp:b,options:t});if(b.callGasLimit=P.callGasLimit,b.verificationGasLimit=P.verificationGasLimit,b.preVerificationGas=P.preVerificationGas,g&&g!=="0x"){const O=await ge({userOp:b,chain:h,client:m,entrypointAddress:o==null?void 0:o.entrypointAddress,paymasterOverride:o==null?void 0:o.paymaster}),R="paymasterAndData"in O?O.paymasterAndData:"0x";R&&R!=="0x"&&(b.paymasterAndData=R)}}}else{const p=await be({userOp:b,options:t});b.callGasLimit=p.callGasLimit,b.verificationGasLimit=p.verificationGasLimit,b.preVerificationGas=p.preVerificationGas}return{...b,signature:"0x"}}async function Va(e){const{userOp:t,chain:n,entrypointAddress:r,adminAccount:s}=e,i=await Ha({client:e.client,userOp:t,chain:n,entrypointAddress:r});if(s.signMessage){const a=await s.signMessage({message:{raw:Hn(i)},originalMessage:X(t),chainId:n.id});return{...t,signature:a}}throw new Error("signMessage not implemented in signingAccount")}async function Ha(e){const{userOp:t,chain:n,entrypointAddress:r}=e,s=Ve(r||j);let i;if(s==="v0.7"){const a=Ua(t);i=await Ba({contract:C({address:r||Ut,chain:n,client:e.client}),userOp:a})}else i=await Ia({contract:C({address:r||j,chain:n,client:e.client}),userOp:t});return i}async function ka(e){const{factoryContract:t,adminAddress:n,accountSalt:r,createAccountOverride:s}=e,i=Pn({factoryContract:t,adminAddress:n,accountSalt:r,createAccountOverride:s});return B([t.address,await te(i)])}async function ja(e){const{accountContract:t,chain:n,client:r,entrypointAddress:s,getNonceOverride:i}=e;return i?i(t):await Pa({contract:C({address:s||j,chain:n,client:r}),key:Da(),sender:t.address})}async function En(e){const t=Date.now();for(;In(e);){if(Date.now()-t>6e4)throw Gn(e),new Error("Account deployment is taking too long (over 1 minute). Please try again.");await new Promise(n=>setTimeout(n,500))}}async function Wa(e){return ne({...e,operation:"eth_sendUserOperation",params:[at(e.userOp),e.options.entrypointAddress??j]})}async function be(e,t){const n=await ne({...e,operation:"eth_estimateUserOperationGas",params:[at(e.userOp),e.options.entrypointAddress??j,t??{}]});return{preVerificationGas:I(n.preVerificationGas),verificationGas:n.verificationGas!==void 0?I(n.verificationGas):void 0,verificationGasLimit:I(n.verificationGasLimit),callGasLimit:I(n.callGasLimit)+Wn,paymasterVerificationGasLimit:n.paymasterVerificationGasLimit!==void 0?I(n.paymasterVerificationGasLimit):void 0,paymasterPostOpGasLimit:n.paymasterPostOpGasLimit!==void 0?I(n.paymasterPostOpGasLimit):void 0}}async function Ka(e){const t=await ne({...e,operation:"thirdweb_getUserOperationGasPrice",params:[]});return{maxPriorityFeePerGas:I(t.maxPriorityFeePerGas),maxFeePerGas:I(t.maxFeePerGas)}}async function Za(e){var n,r;const t=await Ya(e);if(t){if(t.success===!1){const i=(r=(n=la({events:[ya(),ma()],logs:t.logs})[0])==null?void 0:n.args)==null?void 0:r.revertReason;if(!i)throw new Error(`UserOp failed at txHash: ${t.receipt.transactionHash}`);const a=an({data:i});throw new Error(`UserOp failed with reason: '${a.args.join(",")}' at txHash: ${t.receipt.transactionHash}`)}return t.receipt}}async function Ya(e){const t=await ne({options:e,operation:"eth_getUserOperationReceipt",params:[e.userOpHash]});if(t)return ha(t)}async function qa(e){const t=await ne({options:e.options,operation:"zk_paymasterData",params:[e.transaction]});return{paymaster:t.paymaster,paymasterInput:t.paymasterInput}}async function Xa(e){return{transactionHash:(await ne({options:e.options,operation:"zk_broadcastTransaction",params:[{...e.transaction,signedTransaction:e.signedTransaction}]})).transactionHash}}async function ne(e){const{options:t,operation:n,params:r}=e,s=t.bundlerUrl??Me(t.chain),a=await we(t.client)(s,{method:"POST",headers:{"Content-Type":"application/json"},body:X({jsonrpc:"2.0",id:1,method:n,params:r})}),o=await a.json();if(!a.ok||o.error){let c=o.error||a.statusText;typeof c=="object"&&(c=X(c));const u=o.code||"UNKNOWN";throw new Error(`${n} error: ${c}
Status: ${a.status}
Code: ${u}`)}return o.result}const _n=new WeakMap,Ne=new WeakMap;async function Ja(e,t){var y,h,m,x,b,p,g;const{personalAccount:n,client:r,chain:s}=e;if(!n)throw new Error("No personal account provided for smart account connection");const i=t,a=s??i.chain,o="gasless"in i?i.gasless:i.sponsorGas;if(await St(a))return[no({creationOptions:t,connectionOptions:e,chain:a,sponsorGas:o}),a];if(i.factoryAddress&&!((y=i.overrides)!=null&&y.entrypointAddress)){const P=await Ln(i.factoryAddress,r,a);P&&(i.overrides={...i.overrides,entrypointAddress:P})}(h=i.overrides)!=null&&h.tokenPaymaster&&!((m=i.overrides)!=null&&m.entrypointAddress)&&(i.overrides={...i.overrides,entrypointAddress:Ut});const c=i.factoryAddress??Kn((x=i.overrides)==null?void 0:x.entrypointAddress),u=C({client:r,address:c,chain:a}),d=await ga({factoryContract:u,adminAddress:n.address,predictAddressOverride:(b=i.overrides)==null?void 0:b.predictAddress,accountSalt:(p=i.overrides)==null?void 0:p.accountSalt,accountAddress:(g=i.overrides)==null?void 0:g.accountAddress}).then(P=>P).catch(P=>{throw new Error(`Failed to get account address with factory contract ${u.address} on chain ID ${a.id}: ${(P==null?void 0:P.message)||"unknown error"}`,{cause:P})}),f=C({client:r,address:d,chain:a}),l=await eo({...i,chain:a,sponsorGas:o,personalAccount:n,accountContract:f,factoryContract:u,client:r});if(_n.set(n,l),Ne.set(l,n),i.sessionKey&&await Zi({accountContract:f,sessionKeyAddress:i.sessionKey.address,newPermissions:i.sessionKey.permissions})){const P=Ki({account:n,contract:f,permissions:i.sessionKey.permissions,sessionKeyAddress:i.sessionKey.address});await Qi({account:l,transaction:P})}return[l,a]}async function Qa(e){const t=Ne.get(e);t&&(_n.delete(t),Ne.delete(e))}async function eo(e){var s,i;const t=(s=e.overrides)==null?void 0:s.tokenPaymaster;if(t&&Ve(((i=e.overrides)==null?void 0:i.entrypointAddress)||j)!=="v0.7")throw new Error("Token paymaster is only supported for entrypoint version v0.7");let n=e.accountContract;const r={address:L(n.address),async sendTransaction(a){var f,l,y;let o;if(t){await to({accountContract:n,erc20Paymaster:t,options:e});const h=async()=>({paymaster:t.paymasterAddress,paymasterData:"0x"});o=((f=e.overrides)==null?void 0:f.paymaster)||h}else o=(l=e.overrides)==null?void 0:l.paymaster;a.chainId!==n.chain.id&&(n=C({address:r.address,chain:pe(a.chainId),client:e.client}));const c=Tn({accountContract:n,transaction:a,executeOverride:(y=e.overrides)==null?void 0:y.execute}),u=pe(a.chainId),d=await Re({executeTx:c,options:{...e,chain:u,accountContract:n,overrides:{...e.overrides,paymaster:o}}});return ye({client:e.client,chainId:u.id,transactionHash:d.transactionHash,walletAddress:e.accountContract.address,walletType:"smart",contractAddress:a.to??void 0}),d},async sendBatchTransaction(a){var f,l;const o=ba({accountContract:n,transactions:a,executeBatchOverride:(f=e.overrides)==null?void 0:f.executeBatch});if(a.length===0)throw new Error("No transactions to send");const c=a[0];if(!c)throw new Error("No transactions to send");const u=pe(c.chainId),d=await Re({executeTx:o,options:{...e,chain:u,accountContract:n}});return ye({client:e.client,chainId:u.id,transactionHash:d.transactionHash,walletAddress:e.accountContract.address,walletType:"smart",contractAddress:((l=a[0])==null?void 0:l.to)??void 0}),d},async signMessage({message:a}){var c;if((c=e.overrides)!=null&&c.signMessage)return e.overrides.signMessage({adminAccount:e.personalAccount,factoryContract:e.factoryContract,accountContract:n,message:a});const{smartAccountSignMessage:o}=await v(async()=>{const{smartAccountSignMessage:u}=await import("./signing-BXDMQ_6x.js");return{smartAccountSignMessage:u}},__vite__mapDeps([9,1,2]));return o({accountContract:n,factoryContract:e.factoryContract,options:e,message:a})},async signTypedData(a){var c;if((c=e.overrides)!=null&&c.signTypedData)return e.overrides.signTypedData({adminAccount:e.personalAccount,factoryContract:e.factoryContract,accountContract:n,typedData:a});const{smartAccountSignTypedData:o}=await v(async()=>{const{smartAccountSignTypedData:u}=await import("./signing-BXDMQ_6x.js");return{smartAccountSignTypedData:u}},__vite__mapDeps([9,1,2]));return o({accountContract:n,factoryContract:e.factoryContract,options:e,typedData:a})},async onTransactionRequested(a){var o,c;return(c=(o=e.personalAccount).onTransactionRequested)==null?void 0:c.call(o,a)}};return r}async function to(e){var d;const{accountContract:t,erc20Paymaster:n,options:r}=e,s=n.tokenAddress,i=C({address:s,chain:t.chain,client:t.client});if(await Li({contract:i,owner:t.address,spender:n.paymasterAddress})>0n)return;const o=Ui({contract:i,spender:n.paymasterAddress,amountWei:fa-1n}),c=await rt({transaction:o,from:t.address}),u=Tn({accountContract:t,transaction:c,executeOverride:(d=r.overrides)==null?void 0:d.execute});await Re({executeTx:u,options:{...r,overrides:{...r.overrides,tokenPaymaster:void 0}}})}function no(e){const{creationOptions:t,connectionOptions:n,chain:r}=e,s={address:L(n.personalAccount.address),async sendTransaction(i){var d,f,l,y;const a={data:i.data,to:i.to??void 0,value:i.value??0n,chain:pe(i.chainId),client:n.client,eip712:i.eip712};let o=await it({account:s,transaction:a});if(e.sponsorGas&&!o.paymaster){const h=await qa({options:{client:n.client,chain:r,bundlerUrl:(d=t.overrides)==null?void 0:d.bundlerUrl,entrypointAddress:(f=t.overrides)==null?void 0:f.entrypointAddress},transaction:o});o={...o,...h}}const c=await st({account:s,chainId:r.id,eip712Transaction:o}),u=await Xa({options:{client:n.client,chain:r,bundlerUrl:(l=t.overrides)==null?void 0:l.bundlerUrl,entrypointAddress:(y=t.overrides)==null?void 0:y.entrypointAddress},transaction:o,signedTransaction:c});return ye({client:n.client,chainId:r.id,transactionHash:u.transactionHash,walletAddress:s.address,walletType:"smart",contractAddress:i.to??void 0}),{transactionHash:u.transactionHash,client:n.client,chain:r}},async signMessage({message:i}){return n.personalAccount.signMessage({message:i})},async signTypedData(i){const a=Jn(i);return n.personalAccount.signTypedData(a)},async onTransactionRequested(i){var a,o;return(o=(a=n.personalAccount).onTransactionRequested)==null?void 0:o.call(a,i)}};return s}async function Re(e){var r,s,i;const{executeTx:t,options:n}=e;try{const a=await Na({transaction:t,factoryContract:n.factoryContract,accountContract:n.accountContract,adminAddress:n.personalAccount.address,sponsorGas:n.sponsorGas,overrides:n.overrides}),o=await Va({client:n.client,chain:n.chain,adminAccount:n.personalAccount,entrypointAddress:(r=n.overrides)==null?void 0:r.entrypointAddress,userOp:a}),c={chain:n.chain,client:n.client,bundlerUrl:(s=n.overrides)==null?void 0:s.bundlerUrl,entrypointAddress:(i=n.overrides)==null?void 0:i.entrypointAddress},u=await Wa({options:c,userOp:o}),d=await Ca({...c,userOpHash:u});return ye({client:n.client,chainId:n.chain.id,transactionHash:d.transactionHash,walletAddress:n.accountContract.address,walletType:"smart",contractAddress:await A(t.to??void 0)}),{client:n.client,chain:n.chain,transactionHash:d.transactionHash}}finally{Gn(n.accountContract)}}async function Ln(e,t,n){const r=C({address:e,client:t,chain:n});try{return await K({contract:r,method:"function entrypoint() public view returns (address)"})}catch{return}}const co=Object.freeze(Object.defineProperty({__proto__:null,connectSmartAccount:Ja,disconnectSmartAccount:Qa,getEntrypointFromFactory:Ln,isSmartWallet:Zn},Symbol.toStringTag,{value:"Module"}));export{yn as Z,Xi as a,io as b,so as c,gn as d,Wr as e,Qe as f,hi as g,te as h,ao as i,co as j,oo as m,Pn as p,K as r};
